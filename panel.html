<!doctype html>
<html lang="cs">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Panel – Martin Bílek</title>
  <link rel="stylesheet" href="style.css" />
  <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
</head>
<body>
  <nav class="topbar">
    <div class="brand">Martin Bílek – Panel</div>
    <div class="nav-actions">
      <button id="navDashboard" class="link">Dashboard</button>
      <button id="navCompanies" class="link">Firmy</button>
      <button id="navClients" class="link">Klienti</button>
      <button id="navPosts" class="link">Příspěvky</button>
      <button id="navSettings" class="link">Settings</button>
      <button id="logoutBtn" class="btn-ghost small">Odhlásit</button>
    </div>
  </nav>

  <div id="loadingMessage" class="container loading">Načítám panel…</div>

  <main class="container" id="appRoot" style="display:none;">
    <!-- Dashboard -->
    <section id="viewDashboard" class="view">
      <h1>Dashboard</h1>
      <div class="grid">
        <div class="card stat">
          <div class="stat-label">Počet firem</div>
          <div class="stat-value" id="statCompanies">–</div>
        </div>
        <div class="card stat">
          <div class="stat-label">Počet klientů</div>
          <div class="stat-value" id="statClients">–</div>
        </div>
        <div class="card stat">
          <div class="stat-label">Neodeslané příspěvky</div>
          <div class="stat-value" id="statPostsPending">–</div>
        </div>
      </div>
    </section>

    <!-- Firmy -->
    <section id="viewCompanies" class="view" style="display:none;">
      <h1>Firmy</h1>
      <div class="card">
        <h3>Přidat firmu</h3>
        <div class="form-grid">
          <div><label>Název</label><input id="coName" placeholder="Conseq" /></div>
          <div><label>Facebook</label><input id="coFb" placeholder="https://facebook.com/..." /></div>
          <div><label>LinkedIn</label><input id="coLi" placeholder="https://linkedin.com/..." /></div>
          <div><label>Web</label><input id="coWeb" placeholder="https://..." /></div>
        </div>
        <div class="row" style="margin-top:12px;">
          <button id="addCompanyBtn" class="btn-primary">Přidat firmu</button>
          <div class="spacer"></div>
          <input type="file" id="importCompaniesInput" accept=".xlsx,.xls,.csv" style="display:none;">
          <button id="importCompaniesBtn" class="btn-ghost small">📥 Import z Excelu</button>
          <button id="exportCompaniesBtn" class="btn-ghost small">📤 Export do Excelu</button>
        </div>
      </div>

      <div class="card">
        <h3>Seznam firem</h3>
        <table class="table" id="companiesTable">
          <thead><tr><th>Název</th><th>Facebook</th><th>LinkedIn</th><th>Web</th><th></th></tr></thead>
          <tbody></tbody>
        </table>
      </div>
    </section>

    <!-- Klienti -->
    <section id="viewClients" class="view" style="display:none;">
      <h1>Klienti</h1>
      <div class="card">
        <h3>Přidat / upravit klienta</h3>
        <div class="form-grid">
          <div><label>Jméno</label><input id="clName" /></div>
          <div><label>E-mail</label><input id="clEmail" /></div>
          <div><label>Telefon</label><input id="clPhone" /></div>
          <div style="grid-column:1/-1"><label>Poznámka</label><textarea id="clNote"></textarea></div>
        </div>

        <div class="row" style="margin-top:10px;">
          <button id="addClientBtn" class="btn-primary">Přidat klienta</button>
          <button id="cancelEditClientBtn" class="btn-ghost" style="display:none">Zrušit úpravu</button>
          <div class="spacer"></div>
          <input type="file" id="importClientsInput" accept=".xlsx,.xls,.csv" style="display:none;">
          <button id="importClientsBtn" class="btn-ghost small">📥 Import z Excelu</button>
          <button id="exportClientsBtn" class="btn-ghost small">📤 Export do Excelu</button>
        </div>
      </div>

      <div class="card">
        <h3>Seznam klientů</h3>
        <table class="table" id="clientsTable">
          <thead><tr><th>Jméno</th><th>E-mail</th><th>Telefon</th><th>Poznámka</th><th></th></tr></thead>
          <tbody></tbody>
        </table>
      </div>
    </section>

    <!-- Příspěvky -->
    <section id="viewPosts" class="view" style="display:none;">
      <h1>Příspěvky</h1>
      <div class="card">
        <h3>Nový příspěvek</h3>
        <div class="form-grid">
          <div><label>Společnost</label><select id="postCompany"></select></div>
          <div><label>Nadpis</label><input id="postTitle" /></div>
          <div style="grid-column:1/-1"><label>Text</label><textarea id="postContent" rows="6"></textarea></div>
        </div>

        <div class="row" style="margin-top:10px;">
          <button id="genAiBtn" class="btn-ghost">🤖 Vytvořit shrnutí (AI)</button>
          <div class="spacer"></div>
          <button id="savePostBtn" class="btn-primary">💾 Uložit</button>
        </div>

        <div id="aiOutput" class="ai-output" style="display:none;">
          <div class="grid-2">
            <div><label>Předmět (AI)</label><input id="aiSubject" /></div>
            <div><label>Skupina</label><input id="aiGroup" readonly /></div>
          </div>
          <label>Text e-mailu (AI)</label>
          <textarea id="aiBody" rows="8"></textarea>

          <!-- Nová sekce: sociální sítě firmy -->
          <div id="aiSocials" style="margin-top:12px;font-size:0.9rem;color:#333;">
            <strong>🌐 Odkazy firmy:</strong>
            <ul id="aiLinksList" style="margin:6px 0 0 12px;"></ul>
          </div>
        </div>
      </div>

      <div class="card">
        <h3>Neodeslané příspěvky</h3>
        <table class="table" id="postsTable">
          <thead><tr><th>Společnost</th><th>Titulek</th><th>Datum</th><th>Stav</th><th></th></tr></thead>
          <tbody></tbody>
        </table>
      </div>
    </section>

    <!-- Nastavení -->
    <section id="viewSettings" class="view" style="display:none;">
      <h1>Nastavení</h1>
      <div class="card">
        <h3>OpenAI</h3>
        <p>Vlož svůj OpenAI API klíč:</p>
        <input id="openaiKeyInput" placeholder="sk-..." />
        <div class="row" style="margin-top:8px;">
          <button id="saveOpenAiBtn" class="btn-primary">Uložit</button>
          <button id="clearOpenAiBtn" class="btn-ghost">Smazat</button>
        </div>
      </div>
    </section>
  </main>

  <script type="module" src="app.js"></script>
</body>
</html>
